<!DOCTYPE html>

<head>
	<title>Mineral Stalker</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<!-- App Icon data -->
	<link rel="Air-Quality-Monitoring-App" href="Air-Quality-Monitoring-App.png">

	<!-- Altered <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" data -->
	<link rel="stylesheet" href="CSS/Required.css" />
	<link rel="stylesheet" href="CSS/General.css" />
	<link rel="stylesheet" type="text/css" href="CSS/Marker_Cluster.css" />

	<script charset="utf8" src="src/1.3.1.jquery.min.js"></script>

	<script src="src/1.5.1.dist.leaflet.js"></script>

	<script type='text/javascript'
		src='https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js'></script>

	<!-- Load Esri Leaflet from CDN -->
	<script src="https://unpkg.com/esri-leaflet@2.2.4/dist/esri-leaflet.js"
		integrity="sha512-tyPum7h2h36X52O2gz+Pe8z/3l+Y9S1yEUscbVs5r5aEY5dFmP1WWRY/WLLElnFHa+k1JBQZSCDGwEAnm2IxAQ=="
		crossorigin=""></script>

	<!-- Leaflet.FeatureGroup.SubGroup assets -->
	<script src="https://unpkg.com/leaflet.featuregroup.subgroup@1.0.2/dist/leaflet.featuregroup.subgroup.js"></script>

	<!-- Link and script for measure tool -->
	<link rel="stylesheet" href="https://ppete2.github.io/Leaflet.PolylineMeasure/Leaflet.PolylineMeasure.css" />

	<script src="https://ppete2.github.io/Leaflet.PolylineMeasure/Leaflet.PolylineMeasure.js"></script>

	<link rel="stylesheet" href="src/leaflet-search.css" />

	<link rel="stylesheet" href="src/leaflet-search.mobile.css" />
	<link rel="icon" href="../../favicon.ico">

	<link rel="stylesheet" href="CSS/bootstrap.css">

	<!-- Link and script for sidebr -->
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
	<link rel="stylesheet" href="CSS/leaflet-sidebar.css" />

</head>

<body>

	<div id="sidebar" class="sidebar collapsed">
        <!-- Nav tabs -->
        <div class="sidebar-tabs">
            <ul role="tablist">
                <li><a href="#home" role="tab"><i class="fa fa-bars"></i></a></li>
                <li><a href="#profile" role="tab"><i class="fa fa-user"></i></a></li>
                <li class="disabled"><a href="#messages" role="tab"><i class="fa fa-envelope"></i></a></li>
                <li><a href="https://github.com/Turbo87/sidebar-v2" role="tab" target="_blank"><i class="fa fa-github"></i></a></li>
            </ul>

            <ul role="tablist">
                <li><a href="#settings" role="tab"><i class="fa fa-gear"></i></a></li>
            </ul>
        </div>

        <!-- Tab panes -->
        <div class="sidebar-content">
            <div class="sidebar-pane" id="home">
                <h1 class="sidebar-header">Mineral Stalker<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>

                <p><b>Mineral Stalker</b> is a Web Map Applications designed to help people locate minerals, fossils, and Geologic points of interest.</p>

                <p>This App is still under construction with new features yet to be added.</p>
            </div>

            <div class="sidebar-pane" id="profile">
                <h1 class="sidebar-header">Profile<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
            </div>

            <div class="sidebar-pane" id="messages">
                <h1 class="sidebar-header">Messages<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
            </div>

            <div class="sidebar-pane" id="settings">
                <h1 class="sidebar-header">Settings<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
				<div>
					<br>
					<table class="settingstable" style="width:100%"> 
						<tr> 
						<th class="text-center"><b>Map Backgrounds</b></th> 
						<th class="text-center">Graphs</th>
						</tr>
						<tr>
						<td>Daily</td>
						<td>Other</td>
						</tr>
						<tr>
						<td>Weakly</td>
						<td>Other</td>
						</tr>
						<tr>
						<td>Monthly</td>
						<td>Other</td>
						</tr>
						<tr>
						<td>Yearly</td>
						<td> + feature.properties.graphs + </td>
						</tr>
						</table>
				</div>

				<div>
					<script>
						L.control.polylineMeasure(options).addTo(map);
					</script>
				</div>
	
				<div id="basemaps-wrapper" class="leaflet-bar">
					<select name="basemaps" id="basemaps" onChange="changeBasemap(basemaps)">
						<option value="Topographic">Topographic</option>
						<option value="Streets">Streets</option>
						<option value="Imagery">Imagery</option>
						<option value="ImageryClarity" selected>Imagery (Clarity)</option>
						<option value="ImageryFirefly">Imagery (Firefly)</option>
						<option value="Gray">Gray</option>
						<option value="DarkGray">Dark Gray</option>
						<option value="ShadedRelief">Shaded Relief</option>
					</select>
				</div>
            </div>
        </div>
    </div>

	<!-- Begin page content -->
	<div id="map" class="sidebar-map"></div>></div>

	<!-- Bootstrap core JavaScript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="src/jquery_1.11.1.js"></script>
	<script src="src/bootsrap.3.3.1.min.js"></script>
	<script src="src/leaflet-search.js"></script>
	<script src="src/bootstrap-timepicker.js"></script>
	<script src="src/LeafletPlayback.js"></script>
	<script src="src/time-slider.js"></script>
	<script src="src/slider_controls.js"></script>
	<script src="data/samplers.geojson.js"></script>
	<script src="data/landfills.geojson.js"></script>
	<script src="data/hydrocarbon.geojson.js"></script>
	<script src="src/demo-tracks.js"></script>
	<script src="js/leaflet-sidebar.js"></script>

	<script>

		var map = L.map('map', {
			zoom: 14,
			center: new L.latLng(39.539, -107.885),
		}),

			geojsonmonitortOpts = {
				pointToLayer: function (feature, latlng) {
					var monitorIcon = L.icon({
						iconSize: [27, 27],
						iconAnchor: [13, 27],
						popupAnchor: [1, -24],
						iconUrl: '../images/blue-circle.png',

					});

					return L.marker(latlng, { icon: monitorIcon });
				},
				onEachFeature: function (feature, layer) {
					layer.bindPopup('<br/><b>Monitor Name:</b> &nbsp;' + feature.properties.name +
						'<br><b>County and State:</b> &nbsp;' + feature.properties.territory +
						'<br><b>Date Offline:</b> &nbsp;' + feature.properties.date_online +
						'&nbsp;<b>Date Offline:</b> &nbsp;' + feature.properties.date_offline +
						'<br/>' + '<br/>' + "<table>" +
						'<tr>' +
						'<th class="text-center"><b>Data Table</b></th>' +
						'<th class="text-center">Concentration Average</th>' +
						'<th class="text-center">Weather</th>' +
						'<th class="text-center">Graphs</th>' +
						'</tr>' +
						'<tr>' +
						'<td>Daily</td>' +
						'<td>Other</td>' +
						'<td>' + feature.properties.tempatures_gra + '</td>' +
						'<td>' + feature.properties.grafana + '</td>' +
						'</tr>' +
						'<tr>' +
						'<td>Weakly</td>' +
						'<td>Other</td>' +
						'<td>' + feature.properties.humity_gra + '</td>' +
						'<td>Other</td>' +
						'</tr>' +
						'<tr>' +
						'<td>Monthly</td>' +
						'<td>Other</td>' +
						'<td>Other</td>' +
						'<td>Other</td>' +
						'</tr>' +
						'<tr>' +
						'<td>Yearly</td>' +
						'<td>Other</td>' +
						'<td>Other</td>' +
						'<td>' + feature.properties.graphs + '</td>' +
						'</tr>' +
						"</table>"
					);
				}
			};

		var monitorlayer = L.layerGroup([
			L.geoJson(Samplers, geojsonmonitortOpts)
		])
			.addTo(map);

		geojsonsourceOpts = {
			pointToLayer: function (feature, latlng) {
				var sourceIcon = L.icon({
					iconSize: [27, 27],
					iconAnchor: [13, 27],
					popupAnchor: [1, -24],
					iconUrl: '../images/orange-circle.png',

				});

				return L.marker(latlng, { icon: sourceIcon });
			},
			onEachFeature: function (feature, layer) {
				layer.bindPopup('<br/><b>Name:</b> &nbsp;' + feature.properties.name +
					'<br><b>Source Type:</b> &nbsp;' + feature.properties.variety +
					'<br><b>Status:</b> &nbsp;' + feature.properties.status +
					'<br><b>Operator:</b> &nbsp;' + feature.properties.operator +
					'<br><b>Spud Date:</b> &nbsp;' + feature.properties.date_spud +
					'&nbsp;<b>Shut-in Date:</b> &nbsp;' + feature.properties.date_shut_in +
					'<br><b>Location:</b> &nbsp;' + feature.properties.location +
					'<br/>' + '<br/>' + "<table>" +
					'<tr>' +
					'<th class="text-center">Casing Depths</th>' +
					'<th class="text-center">Leak Reports</th>' +
					'<th class="text-center">Other</th>' +
					'<tr>' +
					'<td>' + feature.properties.casing_depths + '</td>' +
					'<td>' + feature.properties.leak_reports + '</td>' +
					'<td>' + feature.properties.other + '</td>' +
					"</table>"
				);
			}
		};

		var sourcelayer = L.layerGroup([
			L.geoJson(hydrocarbon_wells, geojsonsourceOpts)
		])
			.addTo(map);

		function style(feature) {
			return {
				color: "black",
				weight: 2,
				opacity: 0.7,
				fill: true,
				fillColor: "maroon",
				fillOpacity: 0.3,
				smoothFactor: 0.5,
				dashArray: '5,5',
			};
		}

		function onEachFeature(feature, layer) {
			// feature.properties.popupContent is required for popup
			if (feature.properties && feature.properties.popupContent) {
				layer.bindPopup('<br/><b>Name:</b> &nbsp;' + feature.properties.name +
					'<br><b>Address:</b> &nbsp;' + feature.properties.address +
					'<br><b>Date Opened:</b> &nbsp;' + feature.properties.date_open +
					'&nbsp;<b>Date Closed:</b> &nbsp;' + feature.properties.date_shut_down +
					'<br/>' + '<br/>' + "<table>" +
					'<tr>' +
					'<th class="text-center">data</th>' +
					'<th class="text-center">data</th>' +
					'<th class="text-center">data</th>' +
					'<tr>' +
					'<td>N/A</td>' +
					'<td>N/A</td>' +
					'<td>N/A</td>' +
					"</table>");
			}
		}

		var boundarymarkers = L.geoJson(boundaries, {
			style: style,
			onEachFeature: onEachFeature
		}).addTo(map);

	</script>
</body>

<script type="text/javascript">

	//create esri layers and selector

	var layer = L.esri.basemapLayer('Imagery').addTo(map);
	var layerLabels = L.esri.basemapLayer('ImageryLabels');
	map.addLayer(layerLabels);

	function setBasemap(basemap) {
		if (layer) {
			map.removeLayer(layer);
		}

		layer = L.esri.basemapLayer(basemap);

		map.addLayer(layer);

		if (layerLabels) {
			map.removeLayer(layerLabels);
		}

		if (basemap === 'ShadedRelief' ||
			basemap === 'Oceans' ||
			basemap === 'Gray' ||
			basemap === 'DarkGray' ||
			basemap === 'Terrain'
		) {
			layerLabels = L.esri.basemapLayer(basemap + 'Labels');
			map.addLayer(layerLabels);
		} else if (basemap.includes('Imagery')) {
			layerLabels = L.esri.basemapLayer('ImageryLabels');
			map.addLayer(layerLabels);
		}
	}

	function changeBasemap(basemaps) {
		var basemap = basemaps.value;
		setBasemap(basemap);
	}

	var sidebar = L.control.sidebar('sidebar').addTo(map);

	var searchLayers = L.layerGroup([
		L.geoJson(Samplers, geojsonmonitortOpts),
		L.geoJson(hydrocarbon_wells, geojsonsourceOpts)
	]);

	L.control.search({
			layer: searchLayers,
			initial: false,
			propertyName: 'name',
			buildTip: function (text, val) {
				var type = val.layer.feature.properties.amenity;
				return '<a href="#" class="' + type + '">' + text + '<b>' + type + '</b></a>';
			}
		})
			.addTo(map);

		var markeroverlays = {
			"Monitors": monitorlayer,
			"Hydrocarbon Production": sourcelayer,
			"Collection Boundary": boundarymarkers
		};

	L.control.layers(null, markeroverlays).addTo(map);

</script>

</body>

</html>